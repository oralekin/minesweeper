var T=Object.defineProperty;var U=(v,c,o)=>c in v?T(v,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):v[c]=o;var m=(v,c,o)=>(U(v,typeof c!="symbol"?c+"":c,o),o);const V=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(l){if(l.ep)return;l.ep=!0;const h=o(l);fetch(l.href,h)}};V();var D=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},M={exports:{}};(function(v){(function(c,o,u){function l(e){var i=this,s=r();i.next=function(){var t=2091639*i.s0+i.c*23283064365386963e-26;return i.s0=i.s1,i.s1=i.s2,i.s2=t-(i.c=t|0)},i.c=1,i.s0=s(" "),i.s1=s(" "),i.s2=s(" "),i.s0-=s(e),i.s0<0&&(i.s0+=1),i.s1-=s(e),i.s1<0&&(i.s1+=1),i.s2-=s(e),i.s2<0&&(i.s2+=1),s=null}function h(e,i){return i.c=e.c,i.s0=e.s0,i.s1=e.s1,i.s2=e.s2,i}function d(e,i){var s=new l(e),t=i&&i.state,n=s.next;return n.int32=function(){return s.next()*4294967296|0},n.double=function(){return n()+(n()*2097152|0)*11102230246251565e-32},n.quick=n,t&&(typeof t=="object"&&h(t,s),n.state=function(){return h(s,{})}),n}function r(){var e=4022871197,i=function(s){s=String(s);for(var t=0;t<s.length;t++){e+=s.charCodeAt(t);var n=.02519603282416938*e;e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=n*4294967296}return(e>>>0)*23283064365386963e-26};return i}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.alea=d})(D,v,!1)})(M);var E={exports:{}};(function(v){(function(c,o,u){function l(r){var e=this,i="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},r===(r|0)?e.x=r:i+=r;for(var s=0;s<i.length+64;s++)e.x^=i.charCodeAt(s)|0,e.next()}function h(r,e){return e.x=r.x,e.y=r.y,e.z=r.z,e.w=r.w,e}function d(r,e){var i=new l(r),s=e&&e.state,t=function(){return(i.next()>>>0)/4294967296};return t.double=function(){do var n=i.next()>>>11,a=(i.next()>>>0)/4294967296,f=(n+a)/(1<<21);while(f===0);return f},t.int32=i.next,t.quick=t,s&&(typeof s=="object"&&h(s,i),t.state=function(){return h(i,{})}),t}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.xor128=d})(D,v,!1)})(E);var O={exports:{}};(function(v){(function(c,o,u){function l(r){var e=this,i="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(t^t<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,r===(r|0)?e.x=r:i+=r;for(var s=0;s<i.length+64;s++)e.x^=i.charCodeAt(s)|0,s==i.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function h(r,e){return e.x=r.x,e.y=r.y,e.z=r.z,e.w=r.w,e.v=r.v,e.d=r.d,e}function d(r,e){var i=new l(r),s=e&&e.state,t=function(){return(i.next()>>>0)/4294967296};return t.double=function(){do var n=i.next()>>>11,a=(i.next()>>>0)/4294967296,f=(n+a)/(1<<21);while(f===0);return f},t.int32=i.next,t.quick=t,s&&(typeof s=="object"&&h(s,i),t.state=function(){return h(i,{})}),t}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.xorwow=d})(D,v,!1)})(O);var R={exports:{}};(function(v){(function(c,o,u){function l(r){var e=this;e.next=function(){var s=e.x,t=e.i,n,a;return n=s[t],n^=n>>>7,a=n^n<<24,n=s[t+1&7],a^=n^n>>>10,n=s[t+3&7],a^=n^n>>>3,n=s[t+4&7],a^=n^n<<7,n=s[t+7&7],n=n^n<<13,a^=n^n<<9,s[t]=a,e.i=t+1&7,a};function i(s,t){var n,a=[];if(t===(t|0))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[n&7]=a[n&7]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&a[n]===0;++n);for(n==8&&(a[7]=-1),s.x=a,s.i=0,n=256;n>0;--n)s.next()}i(e,r)}function h(r,e){return e.x=r.x.slice(),e.i=r.i,e}function d(r,e){r==null&&(r=+new Date);var i=new l(r),s=e&&e.state,t=function(){return(i.next()>>>0)/4294967296};return t.double=function(){do var n=i.next()>>>11,a=(i.next()>>>0)/4294967296,f=(n+a)/(1<<21);while(f===0);return f},t.int32=i.next,t.quick=t,s&&(s.x&&h(s,i),t.state=function(){return h(i,{})}),t}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.xorshift7=d})(D,v,!1)})(R);var F={exports:{}};(function(v){(function(c,o,u){function l(r){var e=this;e.next=function(){var s=e.w,t=e.X,n=e.i,a,f;return e.w=s=s+1640531527|0,f=t[n+34&127],a=t[n=n+1&127],f^=f<<13,a^=a<<17,f^=f>>>15,a^=a>>>12,f=t[n]=f^a,e.i=n,f+(s^s>>>16)|0};function i(s,t){var n,a,f,b,q,A=[],_=128;for(t===(t|0)?(a=t,t=null):(t=t+"\0",a=0,_=Math.max(_,t.length)),f=0,b=-32;b<_;++b)t&&(a^=t.charCodeAt((b+32)%t.length)),b===0&&(q=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,b>=0&&(q=q+1640531527|0,n=A[b&127]^=a+q,f=n==0?f+1:0);for(f>=128&&(A[(t&&t.length||0)&127]=-1),f=127,b=4*128;b>0;--b)a=A[f+34&127],n=A[f=f+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,A[f]=a^n;s.w=q,s.X=A,s.i=f}i(e,r)}function h(r,e){return e.i=r.i,e.w=r.w,e.X=r.X.slice(),e}function d(r,e){r==null&&(r=+new Date);var i=new l(r),s=e&&e.state,t=function(){return(i.next()>>>0)/4294967296};return t.double=function(){do var n=i.next()>>>11,a=(i.next()>>>0)/4294967296,f=(n+a)/(1<<21);while(f===0);return f},t.int32=i.next,t.quick=t,s&&(s.X&&h(s,i),t.state=function(){return h(i,{})}),t}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.xor4096=d})(D,v,!1)})(F);var N={exports:{}};(function(v){(function(c,o,u){function l(r){var e=this,i="";e.next=function(){var t=e.b,n=e.c,a=e.d,f=e.a;return t=t<<25^t>>>7^n,n=n-a|0,a=a<<24^a>>>8^f,f=f-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-a|0,e.d=a<<16^n>>>16^f,e.a=f-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,r===Math.floor(r)?(e.a=r/4294967296|0,e.b=r|0):i+=r;for(var s=0;s<i.length+20;s++)e.b^=i.charCodeAt(s)|0,e.next()}function h(r,e){return e.a=r.a,e.b=r.b,e.c=r.c,e.d=r.d,e}function d(r,e){var i=new l(r),s=e&&e.state,t=function(){return(i.next()>>>0)/4294967296};return t.double=function(){do var n=i.next()>>>11,a=(i.next()>>>0)/4294967296,f=(n+a)/(1<<21);while(f===0);return f},t.int32=i.next,t.quick=t,s&&(typeof s=="object"&&h(s,i),t.state=function(){return h(i,{})}),t}o&&o.exports?o.exports=d:u&&u.amd?u(function(){return d}):this.tychei=d})(D,v,!1)})(N);var I={exports:{}};(function(v){(function(c,o,u){var l=256,h=6,d=52,r="random",e=u.pow(l,h),i=u.pow(2,d),s=i*2,t=l-1,n;function a(x,p,w){var y=[];p=p==!0?{entropy:!0}:p||{};var g=A(q(p.entropy?[x,$(o)]:x==null?_():x,3),y),k=new f(y),C=function(){for(var L=k.g(h),X=e,j=0;L<i;)L=(L+j)*l,X*=l,j=k.g(1);for(;L>=s;)L/=2,X/=2,j>>>=1;return(L+j)/X};return C.int32=function(){return k.g(4)|0},C.quick=function(){return k.g(4)/4294967296},C.double=C,A($(k.S),o),(p.pass||w||function(L,X,j,z){return z&&(z.S&&b(z,k),L.state=function(){return b(k,{})}),j?(u[r]=L,X):L})(C,g,"global"in p?p.global:this==u,p.state)}function f(x){var p,w=x.length,y=this,g=0,k=y.i=y.j=0,C=y.S=[];for(w||(x=[w++]);g<l;)C[g]=g++;for(g=0;g<l;g++)C[g]=C[k=t&k+x[g%w]+(p=C[g])],C[k]=p;(y.g=function(L){for(var X,j=0,z=y.i,G=y.j,B=y.S;L--;)X=B[z=t&z+1],j=j*l+B[t&(B[z]=B[G=t&G+X])+(B[G]=X)];return y.i=z,y.j=G,j})(l)}function b(x,p){return p.i=x.i,p.j=x.j,p.S=x.S.slice(),p}function q(x,p){var w=[],y=typeof x,g;if(p&&y=="object")for(g in x)try{w.push(q(x[g],p-1))}catch{}return w.length?w:y=="string"?x:x+"\0"}function A(x,p){for(var w=x+"",y,g=0;g<w.length;)p[t&g]=t&(y^=p[t&g]*19)+w.charCodeAt(g++);return $(p)}function _(){try{var x;return n&&(x=n.randomBytes)?x=x(l):(x=new Uint8Array(l),(c.crypto||c.msCrypto).getRandomValues(x)),$(x)}catch{var p=c.navigator,w=p&&p.plugins;return[+new Date,c,w,c.screen,$(o)]}}function $(x){return String.fromCharCode.apply(0,x)}if(A(u.random(),o),v.exports){v.exports=a;try{n=require("crypto")}catch{}}else u["seed"+r]=a})(typeof self!="undefined"?self:D,[],Math)})(I);var P=M.exports,K=E.exports,H=O.exports,J=R.exports,Q=F.exports,W=N.exports,S=I.exports;S.alea=P;S.xor128=K;S.xorwow=H;S.xorshift7=J;S.xor4096=Q;S.tychei=W;var Y=S;class Z{constructor(c,o,u,l,h){m(this,"_display",0);m(this,"field");m(this,"x");m(this,"y");m(this,"value",0);m(this,"element");m(this,"options");m(this,"active",!0);this.field=c,this.x=o,this.y=u,this.value=l?-1:0,this.options=h!=null?h:{questions:!0},this.element=document.createElement("div"),this.display=0,this.element.addEventListener("mouseup",d=>{if(!!this.active)switch(d.button){case 0:this.leftClick();break;case 2:this.rightClick();break}}),this.element.addEventListener("contextmenu",d=>{d.preventDefault()},!1)}reset(c){this.value=c?-1:0}get display(){return this._display}set display(c){switch(this.element.className="cell",this.element.textContent="",this._display=c,c){case 5:switch(this.element.classList.add("open"),this.value){case 0:this.element.classList.add("zero");break;case 1:this.element.classList.add("one");break;case 2:this.element.classList.add("two");break;case 3:this.element.classList.add("three");break;case 4:this.element.classList.add("four");break;case 5:this.element.classList.add("five");break;case 6:this.element.classList.add("six");break;case 7:this.element.classList.add("seven");break;case 8:this.element.classList.add("eight");break}this.field.cellOpened(),this.element.textContent=""+this.value;break;case 0:this.element.classList.add("closed");break;case 1:this.element.classList.add("closed"),this.element.classList.add("flag");break;case 2:this.element.classList.add("closed"),this.element.classList.add("question"),this.element.textContent="?";break;case 4:this.element.classList.add("open"),this.element.classList.add("mine");break;case 3:this.element.classList.add("open"),this.element.classList.add("mine"),this.element.classList.add("boom");break}}get surrounding(){return[this.field.get(this.y-1,this.x+0),this.field.get(this.y-1,this.x+1),this.field.get(this.y-0,this.x+1),this.field.get(this.y+1,this.x+1),this.field.get(this.y+1,this.x+0),this.field.get(this.y+1,this.x-1),this.field.get(this.y-0,this.x-1),this.field.get(this.y-1,this.x-1)]}countAdjacentBombs(){return this.surrounding.reduce((c,o)=>c+(o&&o.value<0?1:0),0)}countAdjacentFlags(){return this.surrounding.reduce((c,o)=>c+(o&&o.display===1?1:0),0)}setValue(){this.value!==-1&&(this.value=this.countAdjacentBombs())}leftClick(){switch(this.display){case 0:this.open();break;case 1:break;case 5:this.openAdjacents();break}}open(){this.display===0&&(this.value===-1?this.die():(this.display=5,(this.value===0||this.value===this.countAdjacentFlags())&&this.openAdjacents()))}openAdjacents(){this.countAdjacentFlags()===this.value&&this.surrounding.forEach(c=>{c&&c.open()})}reveal(){this.value<0&&this.display===0&&(this.display=4)}stopResponding(){this.active=!1}die(){this.display=3,this.field.die()}rightClick(){switch(this.display){case 0:this.display=1;break;case 1:this.display=this.options.questions?2:0;break;case 2:this.display=0;break}}}class ee{constructor(c,o){m(this,"_seed");m(this,"generator");this._seed=c,this.generator=o(this._seed)}get seed(){return this._seed}getIntBetween(c,o){return Math.round(this.generator()*(o-c)+c-.5)}}class te extends ee{generateBoard(c,o,u){const l=Array.from(Array(c)).map(()=>Array(o).fill(!1));for(let h=0;h<u;){const d=this.getIntBetween(0,c),r=this.getIntBetween(0,o);l[d][r]||(h++,l[d][r]=!0)}return l}}class ne{constructor(c,o,u,l){m(this,"width");m(this,"height");m(this,"mines");m(this,"fieldDiv");m(this,"cells");m(this,"_openCount",0);if(this.fieldDiv=l,this.width=c,this.height=o,this.mines=u,this.width<1||this.height<1)throw new Error("we fucked up");this.cells=Array.from(Array(this.height)).map(()=>Array(this.width).fill(void 0)),this.setUpGame()}setUpGame(){this.fieldDiv.classList.add("field"),this.fieldDiv.style.gridTemplateRows=`repeat(${this.height}, 30px)`,this.fieldDiv.style.gridTemplateColumns=`repeat(${this.width}, 30px)`;const o=new te("my seed",Y.alea).generateBoard(this.height,this.width,this.mines);for(let u=0;u<this.cells.length;u++){const l=this.cells[u];for(let h=0;h<l.length;h++){const d=l[h]=new Z(this,h,u,o[u][h]);this.fieldDiv.appendChild(d.element)}}this.cells.map(u=>u.map(l=>l.setValue()))}get(c,o){if(!(o>=this.width||o<0||c>=this.height||c<0))return this.cells[c][o]}get openCount(){return this._openCount}cellOpened(){this._openCount++,this.width*this.height-this.mines===this.openCount&&this.end()}die(){this.cells.map(c=>c.map(o=>{o.reveal(),o.stopResponding()})),console.log()}end(){console.log()}}const ie=document.querySelector("#field"),se=10,re=10,ae=18;window.field=new ne(se,re,ae,ie);
